# 作業チケット: 翻訳ペア言語情報活用

## 1. 概要と方針

設定ファイルの翻訳ペアに追加された`sourceLang`と`targetLang`プロパティを活用し、翻訳処理で明示的に言語情報を指定できるようにする。これにより、翻訳プロバイダが適切な言語ペアを使用して翻訳品質を向上させる。

## 2. 主な処理フロー

```mermaid
flowchart TD
    A[設定ファイル読み込み] --> B[TransPair型に言語情報追加]
    B --> C[Configuration.load()で言語情報を取得]
    C --> D[transコマンド実行時に言語情報を取得]
    D --> E[翻訳プロバイダに言語情報を渡す]
    E --> F[各プロバイダで言語情報を活用]
    
    subgraph プロバイダ対応
        F --> G[default-ai-provider]
        F --> H[vscode-lm-provider]
        F --> I[ollama-provider]
    end
```

## 3. 主要関数・モジュール

- **Configuration.ts**: `TransPair`型に`sourceLang?`と`targetLang?`を追加
- **trans-command.ts**: 翻訳実行時に言語情報を取得・渡す処理
- **各翻訳プロバイダ**: 言語情報を活用した翻訳処理

## 4. 考慮事項

- **後方互換性**: 既存の設定ファイル（言語情報なし）でも動作させる
- **言語コード形式**: ISO 639-1形式（ja, en, deなど）を前提とする
- **デフォルト動作**: 言語情報が未指定の場合は既存の動作を維持
- **エラーハンドリング**: 無効な言語コードの場合の処理

## 5. 実装計画と進捗

- [x] TransPair型定義に言語プロパティを追加
- [x] Configuration.load()メソッドで言語情報を読み込み
- [x] trans-commandで翻訳ペアの言語情報を取得（手動入力から設定ベースに変更）
- [x] default-ai-providerで言語情報を活用（systemPromptから言語ペアを抽出して翻訳改善）
- [x] vscode-lm-providerで言語情報を活用（既存のsystemPrompt処理で対応済み）
- [x] ollama-providerで言語情報を活用（既存のsystemPrompt処理で対応済み）

## 6. 実装メモ・テスト観点

- 言語情報が設定されていない場合の動作確認
- 無効な言語コードが設定された場合の処理
- 各プロバイダでの言語情報の活用確認

## 7. 次のステップ

実装完了後、翻訳品質の向上を確認し、必要に応じて他の言語コード形式への対応を検討する。
