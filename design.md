# 設計書

## 概要

このアプリケーションは Markdown 形式のドキュメントを翻訳するためのものです。

## 開発環境

- TypeScript
- Node.js
- biome

## ユースケース

- シンプルに 1 ファイルを特定の言語から特定の言語に翻訳する
- 差分

## 主なファイルの解説

### 【src/extension.ts】

VS Code 拡張機能のエントリーポイントです。拡張機能の活性化時に呼び出され、主要な機能のコマンド登録を行います。

主な役割：

- VS Code の `activate` 関数で拡張機能を初期化
- 翻訳コマンドを登録し、ユーザーがコマンドを実行したときの処理を定義
- 翻訳処理の全体フローを制御（設定読み込み → ファイル探索 → 翻訳実行）

### 【src/configuration.ts】

アプリケーションの設定を管理するクラスを定義したファイルです。

主な役割：

- VS Code の設定から値を読み込む機能
- ディレクトリ、ファイル拡張子、翻訳オプションなどの設定項目を定義
- 設定値の検証を行い、必要な項目が設定されているか確認する機能

### 【src/file-explorer.ts】

ファイル操作に関する機能を提供するクラスを定義したファイルです。

主な役割：

- 翻訳対象のファイルをディレクトリから検索する機能
- ソースファイルから対応するターゲットファイルのパスを計算する機能
- 出力先ディレクトリが存在しない場合に作成する機能

### 【src/translation-provider.ts】

翻訳機能のインターフェースと実装を提供するファイルです。

主な役割：

- 翻訳プロバイダーのインターフェース定義（どのような機能を持つべきかを規定）
- デフォルトの翻訳プロバイダー実装
- Markdown 形式のテキストを翻訳する機能（コードブロックを保護する機能を含む）
- CSV 形式のテキストを翻訳する機能

### 【test/】ディレクトリ

各コンポーネントのテストファイルを含むディレクトリです。単体テストによって機能の正常性を確認します。

### 【sample/】ディレクトリ

テスト用のサンプルファイルを含むディレクトリです。英語(en)と日本語(ja)のサンプルが用意されています。

### 【設定ファイル】

#### 【package.json】

VS Code 拡張機能の定義と設定を行うためのファイルです。npm（Node.js のパッケージマネージャ）の設定ファイルでもあります。

主な内容：

- 拡張機能の基本情報（名前、表示名、説明文、バージョン）
- VS Code の最小要件バージョン（engines セクション）
- コマンドの定義（mdtrans.translate）
- 拡張機能の設定項目（翻訳元/先ディレクトリ、対象ファイル拡張子、翻訳オプションなど）
- スクリプト定義（コンパイル、テスト、リントなどの開発用コマンド）
- 開発依存関係（TypeScript、テストツール、リントツールなど）

#### 【tsconfig.json】

TypeScript のコンパイラ設定を行うファイルです。TypeScript コードを JavaScript に変換する際のルールを定義します。

主な設定：

- `module`: モジュールシステムの形式（Node16 形式を使用）
- `target`: 出力先の JavaScript バージョン（ES2022 を使用）
- `outDir`: コンパイル後のファイルの出力先（"out"ディレクトリ）
- `rootDir`: ソースコードのルートディレクトリ（"src"ディレクトリ）
- `strict`: 厳格な型チェックを有効化
- `noImplicitReturns`: すべての関数で明示的な return 文を要求

#### 【biome.json】

Biome というコード整形・リントツールの設定ファイルです。コードの一貫性やスタイルを保つためのルールを定義します。

主な設定：

- `formatter`: コードの整形設定（インデントはタブ文字を使用）
- `linter`: コード品質のチェック設定（recommended：推奨ルールを有効化）
- `organizeImports`: import ステートメントの自動整理を有効化
- `javascript.formatter.quoteStyle`: 文字列にダブルクォート(")を使用

## hashsync

