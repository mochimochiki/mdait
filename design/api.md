# API層設計

## 概要

外部サービス（AI翻訳プロバイダー等）との連携を担当する層です。異なるプロバイダーに対する統一インターフェースを提供し、設定に応じた適切なサービスインスタンスを生成・管理します。

## 主要機能

### AIサービス統合
複数のAI翻訳プロバイダーに対する統一インターフェースを提供します。

**対応プロバイダー：**
- **default**: デフォルトプロバイダー（OpenAI等）
- **ollama**: ローカルOllamaインスタンス
- **vscode-lm**: VSCode Language Model API
- *将来拡張*: その他のクラウドサービス

### プロバイダー管理
設定に基づく動的なプロバイダー選択と初期化を行います。

**機能：**
- [config.md](config.md)の設定に基づくプロバイダー選択
- 各プロバイダー固有の初期化処理
- エラーハンドリングとフォールバック

## 設計原則

- **プロバイダー抽象化**: 共通インターフェースによる実装の隠蔽
- **設定連携**: 設定管理層との密接な連携
- **拡張性**: 新しいプロバイダーの追加容易性
- **エラー回復**: 接続失敗時の適切な処理

## 関連モジュールとの連携

- **commands層**: transコマンドでの翻訳実行時に利用
- **config層**: プロバイダー設定の取得と適用
- **core層**: 翻訳結果の統合処理

## 参考

- [ルート設計書](design.md) - 全体アーキテクチャ
- [commands.md](commands.md) - API利用するコマンド実装
- [config.md](config.md) - プロバイダー設定管理