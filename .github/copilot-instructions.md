## 重要

### 必須事項

- 設計時は設計ガイドラインに従う
- 実装開始時は実装ガイドラインに従う
- テスト実装時はテストガイドラインに従う

### 設計ガイドライン

実装をすぐに始められるほどの明確な指示でない場合、まずは設計を行ってください。`design/design.md`を参照して関連する事項を確認し、ユーザーと対話しながら設計を行ってください。

- 設計の概要をチャットに出力する場合、コードは必要最小限にとどめる。
- チャットでは詳細よりも、設計の方針や骨子・会話を重視する。
- 方針・骨子がまとまったら変更や新機能については`design`の適切なファイルを修正する。周りと粒度を合わせ、要点を簡潔に書くことを心がける。詳細は作業チケットに記載する。
- `tasks/wishlist.md`に存在するWishを扱う場合は`wishlist.md`のガイドラインに従って作業する
- 作業チケットが必要な場合、`/tasks`に新規ファイルを作成し、ユーザーに承認を得る。作業チケットは設計ガイドラインに従って作成する。
- 作業チケットは簡潔に。おおむね30-80行以内で。
- プロンプトを含む場合、`design/prompt.md` に設計内容を反映する。
- 承認が得られたら実装に進む。実装完了時には`/tasks`から`/tasks/done`にファイルを移し、設計との整合性チェックを行う。
- 作業チケットは以下のフォーマットに従う。
```markdown
# 作業チケット: <作業名>

## 1. 概要と方針

（概要と方針を1-3文で簡潔に記載）

## 2. シーケンス図

（mermaidシーケンス図を使用。重要な処理を明示。適宜rectによるフェーズ分け）

## 3. 考慮事項

（特に注意が必要な点や考慮すべき点、チェックすべき影響範囲などを記載）

## 4. 実装計画と進捗

（実装項目の細目を以下のタスクの形で記載。実装後にチェックをつけていく）
- [ ] <未完了タスク名>
- [x] <完了タスク名>

```

### 実装ガイドライン

実装を開始するのに十分な設計が行われていれば、ユーザーから実装の承認が得て、実装を開始してください。このガイドラインを読んだことを示すために、`実装ガイドラインに従い実装します。`と出力してから作業してください。

- まだブランチが切られていない場合、適切なブランチを切る。
- 実装を始める際は既存のコード構造を確認して、周りのコードにスタイルを合わせる。
- `design`や`/tasks/<作業名>.md`を参照して、設計に従って実装する。
- Node.jsのbuildinモジュールのimportでは`node:`を使用する。
- 指示されていない機能や要件について勝手に実装しない。
- `package.json`に記載の既存パッケージで実装する。新しいパッケージ追加が強く推奨される場合、ユーザーに承認を得る。
- 実装完了時には、`/tasks`から`tasks/done`にファイルを移し、設計との整合性チェックを行う。
- 単体テストを実装する場合、次のテストガイドラインに従う。

### テストガイドライン

テスト実装時にはこのガイドラインに従ってください。テストの実行は`npm test`で行えます。テスト実装前にこのガイドラインを読んだことを示すために、`テストガイドラインに従いテスト実装します。`と出力してください。

- テスト実装前に`design/test.md`を参照し、テスト設計を確認する。
- 実装する際は、周りのコードにスタイルを合わせる。
- Node.jsのbuildinモジュールのimportでは`node:`を使用する。
- テストは`src\test`以下に、`src`以下のディレクトリ構造と対応づくように実装する。
- テスト名は日本語で記述する。
- 単体テストは`src\test`以下に実装する。
- vscodeのGUIテストは`src\test\gui`以下に実装する。
- テストをみだりに増やすのではなく、骨格となる重要なテストケースを厳選して実装する。
- テスト実行時は`npm test`コマンドを使用し、すべてのテストが成功することを確認する。`npm test:vscode`コマンドはユーザーによるGUIテスト専用なので、使用しない。

- `mocha`
  - 明示的importは不要なので**記載しない**。
  - TDDスタイルを使用する。BDDスタイルは使用しない。
  - `suite`と`test`を使用する。`describe`や`it`は使用しない。
