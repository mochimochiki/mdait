---
mode: 'agent'
---

`design.md`を参照して関連する事項を確認し、ユーザーと対話しながら設計を行ってください。

- 設計の概要をチャットに出力する場合、コードは必要最小限にとどめること。
- チャットでは詳細な設計よりも、設計の方針や骨子・会話を重視してください。
- 方針・骨子がまとまってきたら、まとまった変更や新機能については適宜`design.md`を修正してください。
  - 要点を簡潔に書くことを心がけること。設計の変更はユーザーに承認を得てから行ってください。
- `design.md`の詳細設計は、`tasks/do/yymmdd_<作業名>.md`に作業チケットとして記載してください。yymmdd は今日の日付をもとにしてください。ファイル名は日本語で作業概要がよくわかるように簡潔に記載してください。
- 作業チケットは簡潔に。おおむね100行以内・1500文字以内で。疑似コードは使っていいが、細部は記載せず処理概要を伝えるのみにしてください。
- mermaid記法を使用して、図や表を記載し、設計をわかりやすくすることを推奨します。
- 承認が得られたら実装に進んでください。実装完了時には`tasks/do`から`tasks/done`にファイルを移し、設計との整合性チェックおよび実装時のメモを記載してください。
- 以下のフォーマットに従ってください。
```markdown
# 作業チケット: <作業名>

## 1. 概要と方針

（概要と方針を簡潔に記載）

## 2. 主な処理フロー

（mermaid記法を使用）

## 3. 主要関数・モジュール

（代表的なものに絞り、簡潔に記載）

## 4. 考慮事項

（特に注意が必要な点や考慮すべき点、チェックすべき影響範囲などを記載）

## 5. 実装計画と進捗

（実装項目の細目を以下のタスクの形で記載。実装後にチェックをつけていく）
- [ ] <未完了タスク名>
- [x] <完了タスク名>

## 6. 実装メモ・テスト観点

（各タスクの実装完了時に気づきやテスト観点を記載）

## 7. 次のステップ

（次に行うべきことを記載）
```